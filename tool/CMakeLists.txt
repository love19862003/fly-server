#MESSAGE("make pb file...")
SET(PBFILE ${CMAKE_SOURCE_DIR}/message)
FILE(GLOB PROTOBUF_FILES ${PBFILE}/*.proto)
SET(PBSS)
FOREACH(protofile ${PROTOBUF_FILES})
  STRING(REGEX REPLACE ".*/(.*).proto$" "${CMAKE_SOURCE_DIR}/pbs/\\1.pb" GEN_PB ${protofile})
  IF(UNIX)
    #MESSAGE("make pb file protoc -I${PBFILE} -o${GEN_PB} ${protofile}")
    EXECUTE_PROCESS(COMMAND protoc -I${PBFILE} -o${GEN_PB} ${protofile})
  ENDIF(UNIX)
ENDFOREACH()
IF(UNIX)
  SET(PBSLUA ${CMAKE_SOURCE_DIR}/pbs/registerPb.lua)
  EXECUTE_PROCESS(COMMAND lua ${CMAKE_SOURCE_DIR}/tool/pbs.lua)
ENDIF(UNIX)
